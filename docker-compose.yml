services:
  print-server:
    build: .
    restart: unless-stopped

    # BLE requires access to the host's Bluetooth stack via D-Bus
    network_mode: host
    volumes:
      - /var/run/dbus:/var/run/dbus
    # NET_ADMIN + NET_RAW is preferred over privileged: true, but AppArmor on
    # some hosts blocks D-Bus access needed by bleak. If BLE fails with an
    # AppArmor/DBus error, switch to privileged: true instead.
    privileged: true

    environment:
      PRINTER_BLUETOOTH: "X6"   # name prefix or MAC address of your printer
      PRINT_PORT: "8080"
      PRINT_HOST: "0.0.0.0"
      # PRINTER_MODEL: ""       # uncomment to override auto-detection
