services:
  print-server:
    build: .
    restart: unless-stopped

    # BLE requires access to the host's Bluetooth stack via D-Bus
    network_mode: host
    volumes:
      - /var/run/dbus:/var/run/dbus
    cap_add:
      - NET_ADMIN       # BLE socket operations
      - NET_RAW         # raw Bluetooth socket access
    # If BLE fails to connect, replace the cap_add block above with:
    #   privileged: true

    environment:
      PRINTER_BLUETOOTH: "X6"   # name prefix or MAC address of your printer
      PRINT_PORT: "8080"
      PRINT_HOST: "0.0.0.0"
      # PRINTER_MODEL: ""       # uncomment to override auto-detection
